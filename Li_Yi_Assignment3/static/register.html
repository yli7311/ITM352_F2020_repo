<!--layout taken from storenvy cooper theme-->
<!--online store code written by Yi-->
<!DOCTYPE html>
<html lang="en" class="no-js">
<script src="./functions.js"></script>
<script src="user_data.json" type="json"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<script>
  //referenced from assignment #3 examples
  var products;
  loadJSON('get_products_data', function (response) {
    // Parsing JSON string into object
    products = JSON.parse(response);
  });

  //checking quantity input, code from Invoice WOD
  function isNonNegInt(q, return_errors = false) {
    errors = []; // assume no errors at first
    if (q == '') q = 0; // handle blank inputs as if they are 0
    if (Number(q) != q) errors.push('<font color="red">Not a number!</font>'); // Check if string is a number value
    else if (q < 0) errors.push('<font color="red">Negative value!</font>'); // Check if it is non-negative
    else if (parseInt(q) != q) errors.push('<font color="red">Not an integer!</font>'); // Check that it is an integer
    return return_errors ? errors : (errors.length == 0);
  }

  //checking quantity input, code from Assignment 1 page
  function checkQuantityTextbox(theTextbox) {
    errs = isNonNegInt(theTextbox.value, true);
    if (errs.length == 0) errs = ['Quantity'];
    if (theTextbox.value.trim() == '') errs = ['Quantity'];
    document.getElementById(theTextbox.name + '_label').innerHTML = errs.join(", ");
  }

  var total = 0;
  //loading cart data, code referenced from assignment #3 examples
  loadJSON('get_cart', function (response) {
    // Parsing JSON string into object
    shopping_cart = JSON.parse(response);
    for (pk in shopping_cart) {
      console.log(shopping_cart);
      total += shopping_cart[pk].reduce((a, b) => a + b);
    }
  });

  let params = (new URL(document.location)).searchParams;
  var this_category = params.get(`category`); //get category value from param
  if (this_category > products.length) {
    window.location.href = "./index.html"; //if category is undefined (no category value in param), send the user to shop-all
  }

</script>

<head>
  <meta charset="utf-8">

  <title>✦ A Little Sticker Shop ✦</title>

  <!--css sheet-->
  <link href="styles.css" rel="stylesheet" />

  <!--background image-->
  <style type="text/css" media="screen">
    body {
      background-image: url(https://dpegb9ebondhq.cloudfront.net/background_images/900833/tumblr_inline_mp6g7fletV1qz4rgp_original.png);
    }
  </style>

  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Comfortaa|Dosis|Raleway">
</head>

<body id="home-page" class="home theme">
  <div id="wrapper">
    <div id="container">
      <div id="header">
        <div id="store_info">
          <h1 class="store_name"><a href="/">✦ A Little Sticker Shop ✦</a></h1>
        </div>
      </div><!-- end #header -->
      <div id="content">
        <div class="row">
          <div id="sidebar">
            <div class="sidebar-wrapper">
              <ul id="user_login_register">
                <li><a href="login.html">▶ Log In</a></li>
                <li><a href="register.html">▶ Register</a></li>
              </ul>
              <hr />
              <ul id="nav">
                <script>
                  nav_bar('', products);
                </script>
              </ul>
              <hr />
              <ul id="buttons">
                <li><a href="./cart.html">▶ Cart (
                    <script>document.write(`${total} `)</script>)
                  </a></li>
              </ul>
              <hr />
              <ul id="buttons">
                <li><a href="./faq.html">▶ FAQ</a></li>
              </ul>

            </div><!-- end .sidebar-wrapper -->
          </div><!-- end #sidebar -->

          <!--code referenced from w3schools.com-->
          <div class="main">
            <div class="registerpage">
              <h1>Register</h1>
              <p>Please fill in this form to create an account.</p>
              <hr>
            </div>
            <form action="/process_register" method="POST">
              <div class="registerform">
                <label for="name"><b>Full Name</b></label><br>
                <input type="text" placeholder="Enter Your Full Name (Max. 30 characters)" name="name" id="name"
                  required><br><br>

                <label for="username"><b>Username</b></label><br>
                <input type="text" placeholder="Enter Username (4-10 characters)" name="username" id="username"
                  required><br><br>

                <label for="email"><b>Email</b></label><br>
                <input type="text" placeholder="Enter Email" name="email" id="email" required><br><br>

                <label for="psw"><b>Password</b></label><br>
                <input type="password" placeholder="Enter Password (Min. 6 characters)" name="password" id="password"
                  required><br><br>

                <label for="psw-repeat" id="passwordrepeatlabel"><b>Repeat Password</b></label><br>
                <input type="password" placeholder="Repeat Password" name="passwordrepeat" id="passwordrepeat"
                  required><br><br>
              </div>
              <input id="purchasedata" name="purchasedata" type="hidden" value=`location.search`>
              <div class="registerpage">
                <hr><br>
                <button type="submit" class="registersubmit">Register</button>
              </div>
            </form>
            <script>
              document.write(`
  <div class="registerpage">
    <div class="container signin">
    <p>Already have an account? <a href="./login.html${location.search}">Sign in</a>
    </p>
  </div>
  </div>`);
            </script>
        </div><!-- end #main-->
      </div>
    </div><!-- end #content -->
    <div id="footer">
      <div id="footer_info">
        <span class="footer-medium">Honolulu, HI</span><br />
        <span class="footer-small">&copy; ✦ A Little Sticker Shop ✦ 2020</span>
      </div><!-- end #footer_info -->
      <div class="clearfix"></div>
    </div><!-- end footer -->
  </div><!-- end #container -->
  </div><!-- end #wrapper -->
  <div class="clearfix"></div>
</body>

</html>